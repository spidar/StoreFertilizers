<form name="myForm" class="form-horizontal" role="form" ng-controller="invoicesController">
    <div ng-show="!data.printMode" id="invoiceNormalMode">
        <div class="remove-bottom-margin">
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:115px;">
                    <div style="font-size:x-large;"><strong>{{companyInfo.name}}</strong></div>
                    <div class="text-overflow"><small>{{companyInfo.address}}</small></div>
                    <div><small>โทร:&nbsp;{{companyInfo.phone}}&nbsp;&nbsp;โทรสาร:&nbsp;{{companyInfo.fax}}</small></div>
                </div>
            </div>
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:115px;">
                    <div class="text-center" style="font-size:large;"><strong>ใบส่งของชั่วคราว</strong></div>
                    <div class="row">
                        <label class="col-xs-2">พนักงาน:</label>
                        @*<select id="invoice-employee" class="form-control input-sm display-inline" ng-model='newInvoice.employee' ng-options='option.name for option in data.employeeList track by option.employeeID'>
                                <option value="">--- กรุณาเลือก ---</option>
                            </select>*@
                        <input type="text" class="form-control input-sm col-xs-10" ng-model='newInvoice.employeeName' />
                    </div>
                    <div class="row">
                        <label class="col-xs-2">วันที่ส่ง:</label>
                        <div class='datepicker input-group date col-xs-10' style="max-width:139px;">
                            <input type='text' customdatepicker ng-model="newInvoice.deliveryDate" class="form-control input-sm" style="max-width:100px;" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="remove-bottom-margin">
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:155px;">
                    <div class="row remove-bottom-margin">
                        <label class="control-label col-xs-2" style="min-width:80px;">ลูกค้า</label>
                        <div class='col-xs-10'>
                            <div style="max-width:350px">
                                <md-autocomplete md-min-length="0" md-selected-item="newInvoice.customer" md-search-text="customerSearchText" md-items="item in getCustomerMatches(customerSearchText)" md-item-text="item.name" class="form-control input-sm">
                                    <span md-highlight-text="customerSearchText">{{item.name}}</span>
                                </md-autocomplete>
                                <span ng-show="!newInvoice.customer" class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:red;"></span>
                                <input ng-show="!!newInvoice.customer && newInvoice.customer.name == 'อื่นๆ'" type="text" class="form-control input-sm" ng-model="newInvoice.customerName" placeholder="ชื่อลูกค้า" />
                            </div>
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <div class='col-xs-12'>
                            <small>{{newInvoice.customer.address}}</small>
                        </div>
                        <div class='col-xs-12'>
                            <small>{{newInvoice.customer.phone1}}</small>
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-2" style="min-width:80px;">ส่งที่</label>
                        <div class='col-xs-10'>
                            <input type="text" id="invoice-shipto" class="form-control input-sm" ng-model="newInvoice.shipTo" placeholder="สถานที่จัดส่งสินค้า" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:155px;">
                    <div class="form-group">
                        <label class="col-xs-1 control-label" style="min-width:80px">เลขที่:</label>
                        <input type="text" id="invoice-InvoiceNumber" class="col-xs-7 form-control input-sm" ng-model="newInvoice.invoiceNumber" placeholder="หมายเลขใบกำกับสินค้า" />
                        <span ng-show="!newInvoice.invoiceNumber || newInvoice.invoiceNumber == ''" class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:red;"></span>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-xs-1" style="min-width:80px;">วันที่:</label>
                        <div class='datepicker input-group date col-xs-10' style="max-width:139px;">
                            <input type='text' customdatepicker ng-model="newInvoice.createdDate" class="form-control input-sm" style="max-width:100px;" placeholder="วันที่ออกใบกำกับสินค้า" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-xs-1" style="min-width:80px;">วันครบ:</label>
                        <div class='datepicker input-group date col-xs-10' style="max-width:139px;">
                            <input type='text' customdatepicker ng-model="newInvoice.dueDate" class="form-control input-sm" style="max-width:100px;" placeholder="วันที่ครบกำหนดชำระเงิน" />
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="widget stacked widget-table action-table">
            <div class="table-responsive widget-content">
                <table class="table table-bordered table-striped table-hover">
                    <thead class="thead-inverse">
                        <tr class="widget-header">
                            <th width="40px" style="text-align:center;">&nbsp;</th>
                            <th width="30px" style="text-align:center;">#</th>
                            <th style="text-align:center;">
                                <div><small>สินค้า</small></div>
                                <div><small>Product</small></div>
                            </th>
                            <th width="100px" style="text-align:center;">
                                <div><small>จำนวน</small></div>
                                <div><small>Qty</small></div>
                            </th>
                            <th width="100px" style="text-align:center;">
                                <div><small>หน่วย</small></div>
                                <div><small>Unit</small></div>
                            </th>
                            <th style="text-align:center;min-width:120px;">
                                <div><small>ราคา</small></div>
                                <div><small>Price</small></div>
                            </th>
                            <th width="75px" style="text-align:center;">
                                <div><small>ส่วนลด%</small></div>
                                <div><small>Discount</small></div>
                            </th>
                            <th style="min-width:100px;text-align:center;">
                                <div><small>จำนวนเงิน</small></div>
                                <div><small>Amount</small></div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in newInvoice.invoiceDetails | filter:{ isDeleted: '!true'}">
                            <td style="text-align:center;vertical-align:middle;">
                                <a href="" class="btn btn-danger btn-xs noPrint" ng-click="removeInvoiceDetail(item)"><i class="glyphicon glyphicon-trash"></i></a>
                            </td>
                            <td style="text-align:center;vertical-align:middle;">{{item.no}}</td>
                            <td>
                                <md-autocomplete md-min-length="0" md-selected-item="item.product" md-search-text="productSearchText" md-items="item in getProductMatches(productSearchText)" md-item-text="item.name" class="form-control input-sm">
                                    <span md-highlight-text="productSearchText">{{item.name}}</span>
                                </md-autocomplete>
                                <span ng-show="!item.product" class="glyphicon glyphicon-exclamation-sign" aria-hidden="true" style="color:red;"></span>
                            </td>
                            <td style="text-align:right;">
                                <input type="number" ng-model="item.qty" min="0" style="text-align:right;max-width:none;" ng-validate="integer" class="form-control input-sm" placeholder="0" />
                            </td>
                            <td style="text-align:center;">
                                {{item.product.unitType.name}}(<small>{{item.product.unitsPerPackageText}}</small>)
                            </td>
                            <td style="text-align:right;">
                                <input type="number" ng-model="item.pricePerUnit" min="0" style="text-align:right;max-width:none;" ng-validate="decimal" class="form-control input-sm" placeholder="0.00" />
                            </td>
                            <td style="text-align:center;">
                                <input type="number" min="0" max="100" ng-model="item.discount" style="text-align:right;max-width:none;" class="form-control input-sm" placeholder="0" />
                            </td>
                            <td style="text-align:right;vertical-align:middle;">
                                {{calculateAmount(item) | currency: ''}}
                            </td>
                        </tr>
                        <tr class="noPrint">
                            <td colspan="8">
                                <a class="btn btn-primary btn-xs" href="" ng-click="addItem()"><i class="glyphicon glyphicon-plus"></i></a>
                            </td>
                        </tr>
                        <tr style="background-color:#f9f9f9;">
                            <td colspan="4">
                                <textarea ng-model="newInvoice.notes" class="form-control col-xs-12" rows="5" style="min-width:100%;resize:none;" placeholder="กรอกหมายเหตุ(ถ้ามี)"></textarea>
                            </td>
                            <td colspan="3" style="text-align:right;vertical-align:middle;">
                                <div>รวมเป็นเงิน</div>
                                <div>Grand Total</div>
                                <br />
                                ({{calculateNetTotalText()}})
                            </td>
                            <td style="text-align:right;vertical-align:middle;">{{calculateNetTotal() | currency: ''}}</td>
                        </tr>
                        <tr style="background-color:white;">
                            <td colspan="5" style="padding:0px;">
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>ชำระ:</strong><br /><small style="font-size:75%;">PAID</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <input type="checkbox" ng-model="newInvoice.paid" />
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>ธนาคาร:</strong><br /><small style="font-size:75%;">BANK</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <input type="text" id="bank" ng-model="newInvoice.bank" class="form-control input-sm" />
                                    </div>
                                </div>
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>สาขา:</strong><br /><small style="font-size:75%;">BRANCH</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <input type="text" class="form-control input-sm" ng-model="newInvoice.bankBranch" placeholder="สาขา" />
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>เลขเช็ค:</strong><br /><small style="font-size:75%;">CHEQUE#</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <input type="text" class="form-control input-sm" ng-model="newInvoice.chequeNumber" placeholder="หมายเลขเช็ค" />
                                    </div>
                                </div>
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>ลงวันที่:</strong><br /><small style="font-size:75%;">DATE</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <div class='datepicker input-group date' style="max-width:139px;">
                                            <input type='text' customdatepicker ng-model="newInvoice.paidDate" class="form-control input-sm" style="max-width:100px;" placeholder="เช็คลงวันที่" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>จำนวนเงิน:</strong><br /><small style="font-size:75%;">AMOUNT</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <input type="number" class="form-control input-sm" min="0" style="text-align:right;" ng-model="newInvoice.paidAmount" placeholder="จำนวนเงินที่รับ" />
                                    </div>
                                </div>
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>วันที่รับ:</strong><br /><small style="font-size:75%;">DATE</small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <div class='datepicker input-group date' style="max-width:139px;">
                                            <input type='text' customdatepicker ng-model="newInvoice.paidCollectedDate" class="form-control input-sm" style="max-width:100px;" placeholder="วันที่รับ" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>ผู้รับเงิน:</strong><br /><small style="font-size:75%;"></small></label>
                                    <div class="col-xs-4" style="padding-top:10px;">
                                        <input type="text" class="form-control input-sm" ng-model="newInvoice.paidCollector" placeholder="ชื่อผู้รับเงิน" />
                                    </div>
                                </div>
                            </td>
                            <td colspan="2" style="padding:0px;text-align:center;" align="center">
                                <input type="text" style="max-width:none;text-align:center;" class="form-control input-sm" ng-model="newInvoice.deliveryByPerson" placeholder="ชื่อผู้ส่งสินค้า" />
                                <div>ผู้ส่งสินค้า/<small>DELIVERY BY</small></div>
                                <br />
                                <input type="text" style="max-width:none;text-align:center;" class="form-control input-sm" ng-model="newInvoice.receivedByPerson" placeholder="ชื่อผู้รับสินค้า" />
                                <div>ผู้รับสินค้า/<small>RECEIVE BY</small></div>
                                <br />
                                <div class='datepicker input-group date' style="max-width:none">
                                    <input type='text' customdatepicker ng-model="newInvoice.receivedProductDate" class="form-control input-sm" style="max-width:none;" placeholder="วันที่รับสินค้า" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                                <div>วันที่/<small>DATE</small></div>
                            </td>
                            <td style="padding:0px;text-align:center;">
                                <div><strong>หจก.เจริญถาวร</strong></div>
                                <br />
                                <br />
                                <br />
                                <br />
                                <br />
                                <div>ลายเซนต์/SIGNATURE</div>
                                <br />
                                <div>วันที่/DATE</div>
                                <div>
                                    -----/-----/-----
                                </div>
                                <!--
                                <div class="input-group input-append date datepicker">
                                    <input type="text" class="form-control input-sm" id="invoice-DueDate" placeholder="ลงวันที่" />
                                    <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                                </div>
                                -->
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div ng-show="data.printMode && !data.printValueOnly" id="invoiceWithLine" style="min-width:800px;max-width:800px;">
        <div class="form-group remove-bottom-margin" style="margin:0px;">
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:140px;">
                    <div style="font-size:x-large;"><strong>{{companyInfo.name}}</strong></div>
                    <div class="text-overflow"><small>{{companyInfo.address}}</small></div>
                    <div><small>โทร:&nbsp;{{companyInfo.phone}}&nbsp;&nbsp;โทรสาร:&nbsp;{{companyInfo.fax}}</small></div>
                </div>
            </div>
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:140px;">
                    <div class="text-center" style="font-size:large;"><strong>ใบส่งของชั่วคราว</strong></div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>พนักงาน:</strong><br /><small style="font-size:75%;">Employee</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.employeeName}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>วันที่ส่ง:</strong><br /><small style="font-size:75%;">Deliver Date</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.deliveryDate | date: 'dd/MM/yyyy'}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group remove-bottom-margin" style="margin:0px;">
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:155px;">
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-3" style="min-width:80px;"><strong>ลูกค้า:</strong><br /><small style="font-size:75%;">Customer</small></label>
                        <div class='col-xs-9' style="padding-top:10px;">
                            {{newInvoice.customer.name}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <div class='col-xs-12'>
                            <small>{{newInvoice.customer.address}}</small>
                        </div>
                        <div class='col-xs-12'>
                            <small>{{newInvoice.customer.phone1}}</small>
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-3" style="min-width:80px;"><strong>ส่งที่:</strong><br /><small style="font-size:75%;">Ship To</small></label>
                        <div class='col-xs-9' style="padding-top:10px;">
                            {{newInvoice.shipTo}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:155px;">
                    <div class="form-group row remove-bottom-margin">
                        <label for="paymentType" class="col-xs-4 control-label"><strong>เลขที่:</strong><br /><small style="font-size:75%;">Invoice No.</small></label>
                        <div class="col-xs-8" style="padding-top:10px;">
                            {{newInvoice.invoiceNumber}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>วันที่:</strong><br /><small style="font-size:75%;">Created Date</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.createdDate | date: 'dd/MM/yyyy'}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>กำหนดชำระ:</strong><br /><small style="font-size:75%;">Due Date</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.dueDate | date: 'dd/MM/yyyy'}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <table class="table">
            <thead>
                <tr style="height:58px;">
                    <th width="30px" style="text-align:center;">#</th>
                    <th style="text-align:center;">
                        <div><small>สินค้า</small></div>
                        <div><small>Product</small></div>
                    </th>
                    <th width="80px" style="text-align:center;">
                        <div><small>จำนวน</small></div>
                        <div><small>Qty</small></div>
                    </th>
                    <th width="100px" style="text-align:center;">
                        <div><small>หน่วย</small></div>
                        <div><small>Unit</small></div>
                    </th>
                    <th style="text-align:center;min-width:120px;">
                        <div><small>ราคา</small></div>
                        <div><small>Price</small></div>
                    </th>
                    <th width="75px" style="text-align:center;">
                        <div><small>ส่วนลด%</small></div>
                        <div><small>Discount</small></div>
                    </th>
                    <th width="165px" style="text-align:center;">
                        <div><small>จำนวนเงิน</small></div>
                        <div><small>Amount</small></div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in newInvoice.invoiceDetails | filter:{ isDeleted: '!true'}">
                    <td style="text-align:center;vertical-align:middle;">{{item.no}}</td>
                    <td>
                        {{item.product.name}}
                    </td>
                    <td style="text-align:right;">
                        {{item.qty | number}}
                    </td>
                    <td style="text-align:center;">
                        {{item.product.unitType.name}}(<small>{{item.product.unitsPerPackageText}}</small>)
                    </td>
                    <td style="text-align:right;">
                        {{item.pricePerUnit | number}}
                    </td>
                    <td style="text-align:center;">
                        {{item.discount}}
                    </td>
                    <td style="text-align:right;vertical-align:middle;">
                        {{calculateAmount(item) | currency: ''}}
                    </td>
                </tr>
                <tr ng-repeat="i in blankInvoiceDetails track by $index"><td colspan="7">&nbsp;</td></tr>
                <tr style="background-color:#f9f9f9;">
                    <td colspan="3">
                        <div style="white-space:pre-wrap">{{newInvoice.notes}}</div>
                    </td>
                    <td colspan="3" style="text-align:right;vertical-align:middle;">
                        <div>รวมเป็นเงิน</div>
                        <div>Grand Total</div>
                        <br />
                        ({{calculateNetTotalText()}})
                    </td>
                    <td style="text-align:right;vertical-align:middle;">{{calculateNetTotal() | currency: ''}}</td>
                </tr>
                <tr style="background-color:white;">
                    <td colspan="4" style="padding:0px;">
                        <div class="form-group row">
                            <label for="paymentType" class="col-xs-2 control-label"><strong>ชำระ:</strong><br /><small style="font-size:75%;">PAID</small></label>
                            <div class="col-xs-3" style="padding-top:10px;">
                                <div ng-show="newInvoice.paid">จ่ายแล้ว</div>
                                <div ng-show="newInvoice.paid == false">ค้างชำระ</div>
                            </div>
                            <label for="bank" class="col-xs-2 control-label"><strong>ธนาคาร:</strong><br /><small style="font-size:75%;">BANK</small></label>
                            <div class="col-xs-5" style="padding-top:10px;">
                                {{newInvoice.bank}}
                            </div>
                        </div>
                        <div class="form-group row remove-bottom-margin">
                            <label for="paymentType" class="col-xs-2 control-label"><strong>สาขา:</strong><br /><small style="font-size:75%;">BRANCH</small></label>
                            <div class="col-xs-3" style="padding-top:10px;">
                                {{newInvoice.bankBranch}}
                            </div>
                            <label for="bank" class="col-xs-2 control-label"><strong>เช็ค:</strong><br /><small style="font-size:75%;">CHEQUE#</small></label>
                            <div class="col-xs-5" style="padding-top:10px;">
                                {{newInvoice.chequeNumber}}
                            </div>
                        </div>
                        <div class="form-group row remove-bottom-margin">
                            <label for="paymentType" class="col-xs-2 control-label"><strong>ลงวัน:</strong><br /><small style="font-size:75%;">DATE</small></label>
                            <div class="col-xs-3" style="padding-top:10px;">
                                {{newInvoice.paidDate | date: 'dd/MM/yyyy'}}
                            </div>
                            <label for="bank" class="col-xs-2 control-label"><strong>เงิน:</strong><br /><small style="font-size:75%;">AMOUNT</small></label>
                            <div class="col-xs-5" style="padding-top:10px;">
                                {{newInvoice.paidAmount | number}}
                            </div>
                        </div>
                        <div class="form-group row remove-bottom-margin">
                            <label for="paymentType" class="col-xs-2 control-label"><strong>วันรับ:</strong><br /><small style="font-size:75%;">DATE</small></label>
                            <div class="col-xs-3" style="padding-top:10px;">
                                {{newInvoice.paidCollectedDate | date: 'dd/MM/yyyy'}}
                            </div>
                            <label for="bank" class="col-xs-2 control-label"><strong>ผู้รับ:</strong><br /><small style="font-size:75%;"></small></label>
                            <div class="col-xs-5" style="padding-top:10px;">
                                {{newInvoice.paidCollector}}
                            </div>
                        </div>
                    </td>
                    <td colspan="2" style="padding:0px;text-align:center;" align="center">
                        <div>{{newInvoice.deliveryByPerson}}</div>
                        <div>ผู้ส่งสินค้า/<small>DELIVERY BY</small></div>
                        <br />
                        <div>{{newInvoice.receivedByPerson}}</div>
                        <div>ผู้รับสินค้า/<small>RECEIVE BY</small></div>
                        <br />
                        <div>{{newInvoice.receivedProductDate | date:'dd/MM/yyyy'}}</div>
                        <div>วันที่/<small>DATE</small></div>
                    </td>
                    <td style="padding:0px;text-align:center;">
                        <div><strong>หจก.เจริญถาวร</strong></div>
                        <br />
                        <br />
                        <br />
                        <br />
                        <br />
                        <div>ลายเซนต์/SIGNATURE</div>
                        <br />
                        <div>วันที่/DATE</div>
                        <div>
                            -----/-----/-----
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div ng-show="data.printMode && data.printValueOnly" id="invoicValueOnly" style="min-width:800px;max-width:800px;">
        <div class="form-group remove-bottom-margin" style="margin:0px;">
            <div class="col-xs-6" style="padding:2px;">
            </div>
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:140px;border-color:white;">
                    <div class="text-center" style="font-size:large;"><strong>&nbsp;</strong></div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.employeeName}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.deliveryDate | date: 'dd/MM/yyyy'}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group remove-bottom-margin" style="margin:0px;">
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:155px;border-color:white;">
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-3" style="min-width:80px;"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class='col-xs-9' style="padding-top:10px;">
                            {{newInvoice.customer.name}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <div class='col-xs-12'>
                            <small>{{newInvoice.customer.address}}</small>
                        </div>
                        <div class='col-xs-12'>
                            <small>{{newInvoice.customer.phone1}}</small>
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-3" style="min-width:80px;"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class='col-xs-9' style="padding-top:10px;">
                            {{newInvoice.shipTo}}
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xs-6" style="padding:2px;">
                <div class="rounded-div" style="min-height:155px;border-color:white;">
                    <div class="form-group row remove-bottom-margin">
                        <label for="paymentType" class="col-xs-4 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class="col-xs-8" style="padding-top:10px;">
                            {{newInvoice.invoiceNumber}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.createdDate | date: 'dd/MM/yyyy'}}
                        </div>
                    </div>
                    <div class="form-group row remove-bottom-margin">
                        <label class="control-label col-xs-4" style="min-width:80px;"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                        <div class='col-xs-8' style="padding-top:10px;">
                            {{newInvoice.dueDate | date: 'dd/MM/yyyy'}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <table class="table table-bordernocolor">
                    <thead >
                        <tr style="height:58px;">
                            <th width="30px" style="text-align:center;border-color:#FFF;">&nbsp;</th>
                            <th style="text-align:center;border-color:#FFF;">
                                <div><small>&nbsp;</small></div>
                                <div><small>&nbsp;</small></div>
                            </th>
                            <th width="80px" style="text-align:center;border-color:#FFF;">
                                <div><small>&nbsp;</small></div>
                                <div><small>&nbsp;</small></div>
                            </th>
                            <th width="100px" style="text-align:center;border-color:#FFF;">
                                <div><small>&nbsp;</small></div>
                                <div><small>&nbsp;</small></div>
                            </th>
                            <th style="text-align:center;min-width:120px;border-color:#FFF;">
                                <div><small>&nbsp;</small></div>
                                <div><small>&nbsp;</small></div>
                            </th>
                            <th width="75px" style="text-align:center;border-color:#FFF;">
                                <div><small>&nbsp;</small></div>
                                <div><small>&nbsp;</small></div>
                            </th>
                            <th width="165px" style="text-align:center;border-color:#FFF;">
                                <div><small>&nbsp;</small></div>
                                <div><small>&nbsp;</small></div>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in newInvoice.invoiceDetails | filter:{ isDeleted: '!true'}">
                            <td style="text-align:center;vertical-align:middle;">{{item.no}}</td>
                            <td>
                                {{item.product.name}}
                            </td>
                            <td style="text-align:right;">
                                {{item.qty | number}}
                            </td>
                            <td style="text-align:center;">
                                {{item.product.unitType.name}}(<small>{{item.product.unitsPerPackageText}}</small>)
                            </td>
                            <td style="text-align:right;">
                                {{item.pricePerUnit | number}}
                            </td>
                            <td style="text-align:center;">
                                {{item.discount}}
                            </td>
                            <td style="text-align:right;vertical-align:middle;">
                                {{calculateAmount(item) | currency: ''}}
                            </td>
                        </tr>
                        <tr ng-repeat="i in blankInvoiceDetails track by $index"><td colspan="7">&nbsp;</td></tr>
                        <tr>
                            <td colspan="3">
                                <div style="white-space:pre-wrap">{{newInvoice.notes}}</div>
                            </td>
                            <td colspan="3" style="text-align:right;vertical-align:middle;">
                                <div>&nbsp;</div>
                                <div>&nbsp;</div>
                                <br />
                                ({{calculateNetTotalText()}})
                            </td>
                            <td style="text-align:right;vertical-align:middle;">{{calculateNetTotal() | currency: ''}}</td>
                        </tr>
                        <tr style="background-color:white;">
                            <td colspan="4" style="padding:0px;">
                                <div class="form-group row">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-3" style="padding-top:10px;">
                                        <div ng-show="newInvoice.paid">จ่ายแล้ว</div>
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-5" style="padding-top:10px;">
                                        {{newInvoice.bank}}
                                    </div>
                                </div>
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-3" style="padding-top:10px;">
                                        {{newInvoice.bankBranch}}
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-5" style="padding-top:10px;">
                                        {{newInvoice.chequeNumber}}
                                    </div>
                                </div>
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-3" style="padding-top:10px;">
                                        {{newInvoice.paidDate | date: 'dd/MM/yyyy'}}
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-5" style="padding-top:10px;">
                                        {{newInvoice.paidAmount | number}}
                                    </div>
                                </div>
                                <div class="form-group row remove-bottom-margin">
                                    <label for="paymentType" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-3" style="padding-top:10px;">
                                        {{newInvoice.paidCollectedDate | date: 'dd/MM/yyyy'}}
                                    </div>
                                    <label for="bank" class="col-xs-2 control-label"><strong>&nbsp;</strong><br /><small style="font-size:75%;">&nbsp;</small></label>
                                    <div class="col-xs-5" style="padding-top:10px;">
                                        {{newInvoice.paidCollector}}
                                    </div>
                                </div>
                            </td>
                            <td colspan="2" style="padding:0px;text-align:center;" align="center">
                                <div>{{newInvoice.deliveryByPerson}}</div>
                                <div>&nbsp;<small>&nbsp;</small></div>
                                <br />
                                <div>{{newInvoice.receivedByPerson}}</div>
                                <div>&nbsp;<small>&nbsp;</small></div>
                                <br />
                                <div>{{newInvoice.receivedProductDate | date:'dd/MM/yyyy'}}</div>
                                <div>&nbsp;<small>&nbsp;</small></div>
                            </td>
                            <td style="padding:0px;text-align:center;">
                            </td>
                        </tr>
                    </tbody>
                </table>
    </div>


    <hr class="noPrint"/>
    <div ng-show="status!=''" class="alert alert-danger" role="alert">
        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
        {{status}}
    </div>
    <md-progress-linear ng-show="showLoading" md-mode="indeterminate"></md-progress-linear>
    <div class="form-group remove-bottom-margin noPrint">
        <div>
            <button ng-show="!data.printMode" type="submit" ng-click="saveInvoice()" class="btn btn-primary">
                <span class="glyphicon glyphicon-floppy-save"></span> บันทึก
            </button>
            <a href="#" class="btn btn-primary" ng-show="!data.printMode" ng-click="data.printMode = true;data.printValueOnly = true;"><i class="glyphicon glyphicon-print"></i> ตัวอย่างก่อนพิมพ์</a>
            <a href="#" class="btn btn-warning" ng-show="!data.printMode" ng-click="data.printMode = true;data.printValueOnly = false;"><i class="glyphicon glyphicon-print"></i> ตัวอย่างก่อนพิมพ์มีเส้น</a>
            <a href="#" class="btn btn-primary" ng-show="data.printMode" onclick="window.print();"><i class="glyphicon glyphicon-print"></i> พิมพ์</a>
            <a href="#" class="btn btn-primary" ng-show="data.printMode" ng-click="data.printMode = false;"><i class="glyphicon glyphicon-edit"></i> กลับไปแก้ไข</a>
        </div>
    </div>
</form>



